<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="tb_user" >
  <resultMap id="tb_user_BaseResultMap" class="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    <result column="user_id" property="userId" jdbcType="INTEGER" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="gender" property="gender" jdbcType="CHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
  </resultMap>
  <select id="tb_user_selectByPrimaryKey" resultMap="tb_user_BaseResultMap" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    select user_id, user_name, email, gender, password
    from tb_user
    where user_id = #userId:INTEGER#
  </select>
  <delete id="tb_user_deleteByPrimaryKey" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    delete from tb_user
    where user_id = #userId:INTEGER#
  </delete>
  <insert id="tb_user_insert" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->

    insert into tb_user (user_name, email, gender, password)
    values (#userName:VARCHAR#, #email:VARCHAR#, #gender:CHAR#, #password:VARCHAR#)
    <selectKey resultClass="java.lang.Integer" keyProperty="userId" >
      SELECT LAST_INSERT_ID()
    </selectKey>
  </insert>
  <insert id="tb_user_insertSelective" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    insert into tb_user
    <dynamic prepend="(" >
      <isNotNull prepend="," property="userName" >
        user_name
      </isNotNull>
      <isNotNull prepend="," property="email" >
        email
      </isNotNull>
      <isNotNull prepend="," property="gender" >
        gender
      </isNotNull>
      <isNotNull prepend="," property="password" >
        password
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="userName" >
        #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gender" >
        #gender:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        #password:VARCHAR#
      </isNotNull>
      )
    </dynamic>
    <selectKey resultClass="java.lang.Integer" keyProperty="userId" >
      SELECT LAST_INSERT_ID()
    </selectKey>
  </insert>
  <update id="tb_user_updateByPrimaryKeySelective" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    update tb_user
    <dynamic prepend="set" >
      <isNotNull prepend="," property="userName" >
        user_name = #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="email" >
        email = #email:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="gender" >
        gender = #gender:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="password" >
        password = #password:VARCHAR#
      </isNotNull>
    </dynamic>
    where user_id = #userId:INTEGER#
  </update>
  <update id="tb_user_updateByPrimaryKey" parameterClass="com.xiaomi.example.dal.dataobject.UserDO" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Feb 28 18:27:05 CST 2017.
    -->
    update tb_user
    set user_name = #userName:VARCHAR#,
      email = #email:VARCHAR#,
      gender = #gender:CHAR#,
      password = #password:VARCHAR#
    where user_id = #userId:INTEGER#
  </update>

  <select id="tb_user_selectByUserNames" parameterClass="java.util.List" resultMap="tb_user_BaseResultMap">
    <![CDATA[
      SELECT * FROM tb_user WHERE user_name IN
    ]]>
    <iterate prepend="(" conjunction="," close=")">
      <![CDATA[
        #v[]#
      ]]>
    </iterate>
  </select>

  <select id="tb_user_selectByUserName" resultMap="tb_user_BaseResultMap">
    SELECT * FROM tb_user WHERE user_name = #value:VARCHAR# limit 1
  </select>
  <select id="tb_user_selectByNameAndEmail" resultMap="tb_user_BaseResultMap">
    select * from tb_user where user_name = #userName:VARCHAR# and email = #email:VARCHAR#
  </select>

  <insert id="tb_user_insertBatch" parameterClass="java.util.List">
    <![CDATA[
      INSERT INTO tb_user (user_name, email, gender, password) VALUES
    ]]>
    <iterate conjunction=",">
      <![CDATA[
        (#list[].userName#, #list[].email#, #list[].gender#, #list[].password#)
      ]]>
    </iterate>
  </insert>

  <select id="tb_user_loadUsersByPaging" resultMap="tb_user_BaseResultMap">
    SELECT * FROM tb_user
    limit #startNo#, #pageSize#
  </select>
</sqlMap>